{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL='http://localhost:5000/api';const App=()=>{const[categories,setCategories]=useState([]);const[files,setFiles]=useState([]);const[selectedCategory,setSelectedCategory]=useState(null);const[newCategoryName,setNewCategoryName]=useState('');const[selectedFile,setSelectedFile]=useState(null);useEffect(()=>{fetchCategories();},[]);useEffect(()=>{if(selectedCategory){fetchFiles(selectedCategory);}else{fetchAllFiles();}},[selectedCategory]);const fetchCategories=async()=>{try{const response=await axios.get(`${API_URL}/categories`);setCategories(response.data);}catch(error){console.error('Помилка при отриманні категорій:',error);}};const fetchFiles=async categoryId=>{try{const response=await axios.get(`${API_URL}/files/category/${categoryId}`);setFiles(response.data);}catch(error){console.error('Помилка при отриманні файлів:',error);}};const fetchAllFiles=async()=>{try{const response=await axios.get(`${API_URL}/files`);setFiles(response.data);}catch(error){console.error('Помилка при отриманні всіх файлів:',error);}};const handleCategoryCreate=async e=>{e.preventDefault();try{await axios.post(`${API_URL}/categories`,{name:newCategoryName,path:newCategoryName.toLowerCase().replace(/\\s+/g,'-'),parent:selectedCategory});setNewCategoryName('');fetchCategories();}catch(error){console.error('Помилка при створенні категорії:',error);}};const handleFileUpload=async e=>{if(e.target.files&&e.target.files[0]){const formData=new FormData();formData.append('file',e.target.files[0]);formData.append('category',selectedCategory||'');try{await axios.post(`${API_URL}/files`,formData,{headers:{'Content-Type':'multipart/form-data'}});if(selectedCategory){fetchFiles(selectedCategory);}else{fetchAllFiles();}}catch(error){console.error('Помилка при завантаженні файлу:',error);}}};const copyImageUrl=file=>{const url=`${window.location.origin}/${file.path}`;navigator.clipboard.writeText(url);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-4\",children:\"PNG \\u0413\\u0430\\u043B\\u0435\\u0440\\u0435\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-1\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-2\",children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u0457\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCategoryCreate,className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCategoryName,onChange:e=>setNewCategoryName(e.target.value),placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u0457\",className:\"w-full p-2 border rounded mb-2\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-500 text-white px-4 py-2 rounded\",children:\"\\u0421\\u0442\\u0432\\u043E\\u0440\\u0438\\u0442\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u044E\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedCategory(null),className:`w-full p-2 text-left rounded ${!selectedCategory?'bg-gray-200':''}`,children:\"\\u0412\\u0441\\u0456 \\u0444\\u0430\\u0439\\u043B\\u0438\"}),categories.map(category=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedCategory(category._id),className:`w-full p-2 text-left rounded ${selectedCategory===category._id?'bg-gray-200':''}`,children:category.name},category._id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".png\",onChange:handleFileUpload,className:\"block w-full text-sm text-gray-500\\r file:mr-4 file:py-2 file:px-4\\r file:rounded-full file:border-0\\r file:text-sm file:font-semibold\\r file:bg-blue-50 file:text-blue-700\\r hover:file:bg-blue-100\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-4\",children:files.map(file=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"img\",{src:`/${file.path}`,alt:file.name,className:\"w-full h-48 object-contain border rounded\",onClick:()=>setSelectedFile(file)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>copyImageUrl(file),className:\"absolute bottom-2 right-2 bg-blue-500 text-white px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity\",children:\"\\u041A\\u043E\\u043F\\u0456\\u044E\\u0432\\u0430\\u0442\\u0438 URL\"})]},file._id))})]})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","API_URL","App","categories","setCategories","files","setFiles","selectedCategory","setSelectedCategory","newCategoryName","setNewCategoryName","selectedFile","setSelectedFile","fetchCategories","fetchFiles","fetchAllFiles","response","get","data","error","console","categoryId","handleCategoryCreate","e","preventDefault","post","name","path","toLowerCase","replace","parent","handleFileUpload","target","formData","FormData","append","headers","copyImageUrl","file","url","window","location","origin","navigator","clipboard","writeText","className","children","onSubmit","type","value","onChange","placeholder","onClick","map","category","_id","accept","src","alt"],"sources":["C:/Users/zuban/Documents/GitHub/azubanskins/client/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Category, File } from './types';\r\n\r\nconst API_URL = 'http://localhost:5000/api';\r\n\r\nconst App: React.FC = () => {\r\n    const [categories, setCategories] = useState<Category[]>([]);\r\n    const [files, setFiles] = useState<File[]>([]);\r\n    const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\r\n    const [newCategoryName, setNewCategoryName] = useState('');\r\n    const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n\r\n    useEffect(() => {\r\n        fetchCategories();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (selectedCategory) {\r\n            fetchFiles(selectedCategory);\r\n        } else {\r\n            fetchAllFiles();\r\n        }\r\n    }, [selectedCategory]);\r\n\r\n    const fetchCategories = async () => {\r\n        try {\r\n            const response = await axios.get(`${API_URL}/categories`);\r\n            setCategories(response.data);\r\n        } catch (error) {\r\n            console.error('Помилка при отриманні категорій:', error);\r\n        }\r\n    };\r\n\r\n    const fetchFiles = async (categoryId: string) => {\r\n        try {\r\n            const response = await axios.get(`${API_URL}/files/category/${categoryId}`);\r\n            setFiles(response.data);\r\n        } catch (error) {\r\n            console.error('Помилка при отриманні файлів:', error);\r\n        }\r\n    };\r\n\r\n    const fetchAllFiles = async () => {\r\n        try {\r\n            const response = await axios.get(`${API_URL}/files`);\r\n            setFiles(response.data);\r\n        } catch (error) {\r\n            console.error('Помилка при отриманні всіх файлів:', error);\r\n        }\r\n    };\r\n\r\n    const handleCategoryCreate = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        try {\r\n            await axios.post(`${API_URL}/categories`, {\r\n                name: newCategoryName,\r\n                path: newCategoryName.toLowerCase().replace(/\\s+/g, '-'),\r\n                parent: selectedCategory\r\n            });\r\n            setNewCategoryName('');\r\n            fetchCategories();\r\n        } catch (error) {\r\n            console.error('Помилка при створенні категорії:', error);\r\n        }\r\n    };\r\n\r\n    const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files && e.target.files[0]) {\r\n            const formData = new FormData();\r\n            formData.append('file', e.target.files[0]);\r\n            formData.append('category', selectedCategory || '');\r\n\r\n            try {\r\n                await axios.post(`${API_URL}/files`, formData, {\r\n                    headers: {\r\n                        'Content-Type': 'multipart/form-data'\r\n                    }\r\n                });\r\n                if (selectedCategory) {\r\n                    fetchFiles(selectedCategory);\r\n                } else {\r\n                    fetchAllFiles();\r\n                }\r\n            } catch (error) {\r\n                console.error('Помилка при завантаженні файлу:', error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const copyImageUrl = (file: File) => {\r\n        const url = `${window.location.origin}/${file.path}`;\r\n        navigator.clipboard.writeText(url);\r\n    };\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-4\">\r\n            <h1 className=\"text-3xl font-bold mb-4\">PNG Галерея</h1>\r\n            \r\n            <div className=\"grid grid-cols-4 gap-4\">\r\n                {/* Бокова панель з категоріями */}\r\n                <div className=\"col-span-1\">\r\n                    <h2 className=\"text-xl font-semibold mb-2\">Категорії</h2>\r\n                    <form onSubmit={handleCategoryCreate} className=\"mb-4\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={newCategoryName}\r\n                            onChange={(e) => setNewCategoryName(e.target.value)}\r\n                            placeholder=\"Назва категорії\"\r\n                            className=\"w-full p-2 border rounded mb-2\"\r\n                        />\r\n                        <button type=\"submit\" className=\"bg-blue-500 text-white px-4 py-2 rounded\">\r\n                            Створити категорію\r\n                        </button>\r\n                    </form>\r\n                    \r\n                    <div className=\"space-y-2\">\r\n                        <button\r\n                            onClick={() => setSelectedCategory(null)}\r\n                            className={`w-full p-2 text-left rounded ${!selectedCategory ? 'bg-gray-200' : ''}`}\r\n                        >\r\n                            Всі файли\r\n                        </button>\r\n                        {categories.map((category) => (\r\n                            <button\r\n                                key={category._id}\r\n                                onClick={() => setSelectedCategory(category._id)}\r\n                                className={`w-full p-2 text-left rounded ${selectedCategory === category._id ? 'bg-gray-200' : ''}`}\r\n                            >\r\n                                {category.name}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Основна область з файлами */}\r\n                <div className=\"col-span-3\">\r\n                    <div className=\"mb-4\">\r\n                        <input\r\n                            type=\"file\"\r\n                            accept=\".png\"\r\n                            onChange={handleFileUpload}\r\n                            className=\"block w-full text-sm text-gray-500\r\n                                file:mr-4 file:py-2 file:px-4\r\n                                file:rounded-full file:border-0\r\n                                file:text-sm file:font-semibold\r\n                                file:bg-blue-50 file:text-blue-700\r\n                                hover:file:bg-blue-100\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-4 gap-4\">\r\n                        {files.map((file) => (\r\n                            <div key={file._id} className=\"relative group\">\r\n                                <img\r\n                                    src={`/${file.path}`}\r\n                                    alt={file.name}\r\n                                    className=\"w-full h-48 object-contain border rounded\"\r\n                                    onClick={() => setSelectedFile(file)}\r\n                                />\r\n                                <button\r\n                                    onClick={() => copyImageUrl(file)}\r\n                                    className=\"absolute bottom-2 right-2 bg-blue-500 text-white px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                >\r\n                                    Копіювати URL\r\n                                </button>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}